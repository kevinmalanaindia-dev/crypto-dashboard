import { useState } from &#39;react&#39;\nimport { QueryClient, QueryClientProvider } from &#39;@tanstack/react-query&#39;\nimport { ReactQueryDevtools } from &#39;@tanstack/react-query-devtools&#39;\n\nfunction makeQueryClient() {\n  return new QueryClient({\n    defaultOptions: {\n      queries: {\n        staleTime: 60 * 1000,\n        refetchOnMount: false,\n        refetchOnReconnect: false,\n        refetchIntervalInBackground: true,\n      },\n    },\n  })\n}\n\nlet browserQueryClient: QueryClient | undefined = undefined\n\nfunction getQueryClient() {\n  if (typeof window === &#39;undefined&#39;) {\n    // Server: always make a new query client\n    return makeQueryClient()\n  } else {\n    // Browser: make a new query client. If already exists, use it.\n    if (!browserQueryClient) browserQueryClient = makeQueryClient()\n    return browserQueryClient\n  }\n}\n\nexport function Providers({ children }: { children: React.ReactNode }) {\n  const queryClient = getQueryClient()\n  return (\n    &lt;QueryClientProvider client={queryClient}&gt;\n      {children}\n      &lt;ReactQueryDevtools initialIsOpen={false} /&gt;\n    &lt;/QueryClientProvider&gt;\n  )\n}